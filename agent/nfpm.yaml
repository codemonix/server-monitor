name: "srm-agent"
arch: "amd64"
platform: "linux"
version: "${VERSION}"
section: "default"
priority: "extra"
maintainer: "Codemonix"
description: "Server Monitor Agent - Collect and send server metrics to Server Monitor backend"
vendor: "Saeid Monfared"
homepage: "https://www.saeidmon.com/server-monitor"
license: "MIT"
contents:
  - src: ./bin/srm-agent
    dst: /usr/bin/srm-agent
    file_info:
      mode: 0755

# config template
  - src: ./config.json.template
    dst: /etc/srm-agent/config.json
    type: config

# systemd service file
  - src: ./systemd/server-monitor-agent.service
    dst: /lib/systemd/system/srm-agent.service

  - type: dir
    dst: /var/lib/srm-agent/data
    file_info:
      mode: 0700
      owner: srm-agent
      group: srm-agent

overrides:
  deb:
    scripts:
      postinstall: ./scripts/postinstall.sh
      preremove: ./scripts/preremove.sh